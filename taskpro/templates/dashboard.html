{% extends 'base.html' %}
{% load static %}

{% block title %}Dashboard - TaskPro{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-tasks"></i>
            <h2>TaskPro</h2>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-filter="all">
                <i class="fas fa-list"></i> All Tasks
            </a>
            <a href="#" class="nav-item" data-filter="pending">
                <i class="fas fa-clock"></i> Pending
            </a>
            <a href="#" class="nav-item" data-filter="completed">
                <i class="fas fa-check-circle"></i> Completed
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <span id="usernameDisplay"></span>
            </div>
            <button class="btn-logout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
        <header class="dashboard-header">
            <h1>My Tasks</h1>
            <button class="btn btn-primary" onclick="openTaskModal()">
                <i class="fas fa-plus"></i> Add New Task
            </button>
        </header>
        
        <!-- Stats Cards -->
        <div class="stats-container">
            <div class="stat-card">
                <i class="fas fa-tasks"></i>
                <div class="stat-info">
                    <h3 id="totalTasks">0</h3>
                    <p>Total Tasks</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-clock"></i>
                <div class="stat-info">
                    <h3 id="pendingTasks">0</h3>
                    <p>Pending</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <div class="stat-info">
                    <h3 id="completedTasks">0</h3>
                    <p>Completed</p>
                </div>
            </div>
        </div>
        
        <!-- Search and Filter -->
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search tasks...">
            </div>
            <select id="priorityFilter" class="filter-select">
                <option value="">All Priorities</option>
                <option value="HIGH">High</option>
                <option value="MEDIUM">Medium</option>
                <option value="LOW">Low</option>
            </select>
        </div>
        
        <!-- Tasks List -->
        <div class="tasks-container" id="tasksContainer">
            <!-- Tasks will be loaded here -->
        </div>
    </main>
</div>

<!-- Task Modal -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">Add New Task</h2>
            <span class="close" onclick="closeTaskModal()">&times;</span>
        </div>
        <form id="taskForm">
            <input type="hidden" id="taskId">
            
            <div class="form-group">
                <label for="taskTitle"><i class="fas fa-heading"></i> Title</label>
                <input type="text" id="taskTitle" required>
            </div>
            
            <div class="form-group">
                <label for="taskDescription"><i class="fas fa-align-left"></i> Description</label>
                <textarea id="taskDescription" rows="4"></textarea>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="taskPriority"><i class="fas fa-flag"></i> Priority</label>
                    <select id="taskPriority" required>
                        <option value="LOW">Low</option>
                        <option value="MEDIUM" selected>Medium</option>
                        <option value="HIGH">High</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="taskDueDate"><i class="fas fa-calendar"></i> Due Date</label>
                    <input type="date" id="taskDueDate" required>
                </div>
            </div>
            
            <div id="modalError" class="error-message"></div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>
        </form>
    </div>
</div>

<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}